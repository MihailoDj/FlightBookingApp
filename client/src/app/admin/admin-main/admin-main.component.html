<app-user-controls></app-user-controls>
<div id="main" class="d-flex flex-column min-vh-100 align-items-center">
  <tabset class="mt-3 w-75">
    <tab heading="Flights" id="flightsTab">
      <main class="w-100 m-auto text-center mt-3">
        <h3 class="text-start">Browse and cancel flights</h3>
        <table class="table table-striped table-hover w-100 mt-3">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">From</th>
              <th scope="col">To</th>
              <th scope="col">Date</th>
              <th scope="col">Total seats</th>
              <th scope="col">Connecting flights</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let flight of flights">
              <th scope="row">{{ flight.id }}</th>
              <th scope="row">{{ flight.departureCity.name }}</th>
              <th scope="row">{{ flight.arrivalCity.name }}</th>
              <th scope="row">{{ flight.dateOfFlight | date: "short" }}</th>
              <th scope="row">{{ flight.totalSeats }}</th>
              <th scope="row">{{ flight.connectingFlights }}</th>
              <th>
                <button
                  class="btn btn-danger"
                  (click)="deleteFlight(flight.id)"
                >
                  Cancel
                </button>
              </th>
            </tr>
          </tbody>
        </table>
      </main>
    </tab>
    <tab heading="Users" id="usersTab">
      <main class="form-signin w-75 m-auto text-center">
        <h3 class="text-start mt-3">Register a new user</h3>
        <form
          #registerForm="ngForm"
          (ngSubmit)="registerUser()"
          autocomplete="off"
          class="mt-3"
        >
          <div class="form-floating mb-2">
            <input
              name="username"
              type="text"
              [(ngModel)]="model.username"
              class="form-control"
              placeholder="Username"
              required
            />
            <label for="floatingInput">Username</label>
          </div>
          <div class="form-floating mb-3">
            <input
              name="password"
              type="text"
              [(ngModel)]="model.password"
              class="form-control"
              placeholder="Password"
              required
            />
            <label for="floatingPassword">Password</label>
          </div>

          <div class="mb-5">
            <p class="m-auto mt-3 text-start">User role:</p>
            <div class="form-check text-start ms-3" required>
              <input
                [value]="1"
                [(ngModel)]="model.role"
                class="form-check-input"
                type="radio"
                name="flexRadioDefault"
              />
              <label class="form-check-label"> Visitor </label>
            </div>
            <div class="form-check text-start ms-3">
              <input
                [value]="2"
                [(ngModel)]="model.role"
                class="form-check-input"
                type="radio"
                name="flexRadioDefault"
              />
              <label class="form-check-label"> Agent </label>
            </div>
          </div>

          <button class="w-50 btn btn-lg btn-primary" type="submit">
            Register
          </button>

          <div class="alert alert-danger mt-3" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>
        </form>
      </main>
    </tab>
  </tabset>
</div>
